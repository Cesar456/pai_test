protocolVersion: 2
name: test1_job
type: job
jobRetryCount: 0
prerequisites:
  - type: dockerimage
    uri: "openpai/standard:python_3.6-pytorch_1.4.0-gpu"
    name: docker_image_0
taskRoles:
  taskrole:
    instances: 1
    completion:
      minFailedInstances: 1
      minSucceededInstances: -1
    taskRetryCount: 0
    dockerImage: docker_image_0
    resourcePerInstance:
      gpu: 1
      cpu: 1
      memoryMB: 6500
    commands:
      - "git clone https://github.com/Cesar456/pai_test.git"
      - pwd
      - cd pai_test
      - python test2.py
defaults:
  virtualCluster: default
extras:
  storages:
    - name: nfs-storage
      mountPath: /data
  # com.microsoft.pai.runtimeplugin:
  #   - plugin: ssh
  #     parameters:
  #       jobssh: true
